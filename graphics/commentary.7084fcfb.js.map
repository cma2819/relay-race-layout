{"version":3,"sources":["../../../node_modules/riot/riot.esm.js","../../../node_modules/bianco.dom-to-array/index.next.js","../../../node_modules/bianco.query/index.next.js","../../../node_modules/@riotjs/hot-reload/index.js","components/commentary/commentary.riot","commentary.ts"],"names":["COMPONENTS_IMPLEMENTATION_MAP","Map","DOM_COMPONENT_INSTANCE_PROPERTY","Symbol","PLUGINS_SET","Set","IS_DIRECTIVE","VALUE_ATTRIBUTE","MOUNT_METHOD_KEY","UPDATE_METHOD_KEY","UNMOUNT_METHOD_KEY","SHOULD_UPDATE_KEY","ON_BEFORE_MOUNT_KEY","ON_MOUNTED_KEY","ON_BEFORE_UPDATE_KEY","ON_UPDATED_KEY","ON_BEFORE_UNMOUNT_KEY","ON_UNMOUNTED_KEY","PROPS_KEY","STATE_KEY","SLOTS_KEY","ROOT_KEY","IS_PURE_SYMBOL","for","PARENT_KEY_SYMBOL","ATTRIBUTES_KEY_SYMBOL","TEMPLATE_KEY_SYMBOL","globals","Object","freeze","__proto__","checkType","element","type","isFunction","value","noop","autobindMethods","source","methods","forEach","method","bind","callOrAssign","prototype","constructor","dashToCamelCase","string","replace","_","c","toUpperCase","moveChildren","target","firstChild","appendChild","cleanNode","node","clearChildren","childNodes","children","Array","from","removeNode","parentNode","remove","removeChild","EACH","IF","SIMPLE","TAG","SLOT","bindingTypes","ATTRIBUTE","EVENT","TEXT","VALUE","expressionTypes","createTemplateMeta","componentTemplate","fragment","dom","cloneNode","avoidDOMInjection","iOF","indexOf","append","get","parent","start","end","before","isSelect","noSelection","child","insertBefore","selected","selectedIndex","call","querySelectorAll","eqeq","a","b","identity","O","moreNodes","moreStart","moreEnd","lessNodes","lessStart","lessEnd","compare","length","m","l","isReversed","futureNodes","futureEnd","currentNodes","currentStart","currentEnd","next","list","i","nextSibling","drop","DELETION","INSERTION","SKIP","SKIP_OND","HS","futureStart","futureChanges","currentChanges","k","minLen","link","tresh","nodes","slice","index","idxInOld","findK","newi","oldi","prev","diff","ptr","OND","rows","cols","v","d","r","pv","cv","pd","outer","diffIdx","applyDiff","currentLength","live","currentIndex","push","ktr","j","lo","hi","mid","smartDiff","dropChild","domdiff","options","currentSame","futureSame","checkType$1","isSvg","el","owner","ownerSVGElement","isTemplate","isNil","content","isFunction$1","isBoolean","isObject","undefined","UNMOUNT_SCOPE","EachBinding","seal","mount","scope","parentScope","update","placeholder","childrenMap","collection","evaluate","items","createPatch","newChildrenMap","batches","patch","values","fn","unmount","redundant","item","info","pop","template","context","mustFilterItem","condition","Boolean","extendScope","_ref","itemName","indexName","binding","getKey","root","isTemplateTag","create","key","oldItem","clone","mustMount","meta","delete","set","_ref2","document","createTextNode","assign","createDOM","IfBinding","mustUnmount","pristine","create$1","_ref3","memoize","cache","cached","val","has","evaluateAttributeExpressions","attributes","reduce","acc","attribute","name","REMOVE_ATTRIBUTE","SET_ATTIBUTE","ElementProto","Element","isNativeHtmlProperty","hasOwnProperty","setAllAttributes","entries","_ref4","attributeExpression","removeAllAttributes","keys","removeAttribute","_ref5","oldValue","getMethod","normalizeValue","RE_EVENTS_PREFIX","eventExpression","_ref6","normalizedEventName","removeEventListener","addEventListener","normalizeStringValue","getTextNode","childNodeIndex","nodeType","Node","COMMENT_NODE","textNode","replaceChild","textExpression","data","valueExpression","expression","expressions","Expression","apply","create$2","flattenCollectionMethods","map","create$3","_ref7","extendParentScope","attr","SlotBinding","getTemplateScope","templateData","slots","find","_ref8","id","create$6","html","bindings","moveSlotInnerContent","mustRemoveRoot","slot","createSlot","_ref9","getTag","component","slotsToMarkup","slotBindings","_ref10","concat","TagBinding","tag","getComponent","keepRootTag","create$4","_ref11","fixTextExpressionsOffset","textExpressionsOffset","e","create$5","templateTagOffset","selector","redundantAttribute","querySelector","bindingExpressions","createHTMLTree","createElement","innerHTML","createSVGTree","container","svgNode","ownerDocument","importNode","window","DOMParser","parseFromString","documentElement","createDOMTree","injectDOM","createTemplateDOM","TemplateChunk","Error","Math","max","bindingsData","defineProperty","enumerable","writable","configurable","defineProperties","properties","defineDefaults","defaults","ATTRIBUTE$1","VALUE$1","camelToDashCase","toLowerCase","dashToCamelCase$1","panic","message","evaluateAttributeExpressions$1","domToArray","els","isArray","test","toString","$","ctx","normalize","parseNodes","names","n","attrs","props","prop","setAttribute","CSS_BY_NAME","STYLE_NODE_SELECTOR","getStyleNode","style","head","cssManager","add","css","inject","join","curry","_len","arguments","_key","_len2","args","_key2","getName","tagName","COMPONENT_CORE_HELPERS","$$","PURE_COMPONENT_API","COMPONENT_LIFECYCLE_METHODS","MOCKED_TEMPLATE_INTERFACE","bindDOMNodeToComponentObject","createCoreAPIMethods","mapFunction","componentTemplateFactory","components","createPureComponent","pureFactoryFunction","createComponent","exports","templateFn","createSubcomponents","componentAPI","defineComponent","state","preserveRoot","enhanceComponentAPI","createAttributeBindings","runPlugins","computeState","oldState","newState","addCssHook","newProps","filter","mountComponent","initialProps","componentName","DOMattributesToObject","compose","fns","f","g","DOM_COMPONENT_INSTANCE_PROPERTY$1","COMPONENTS_IMPLEMENTATION_MAP$1","PLUGINS_SET$1","evaluateInitialProps","register","unregister","keepRootElement","install","plugin","uninstall","implementation","_temp","pure","func","version","__","relayRep","nodecg","Replicant","speakersRep","Commentary","themeColor","speakers","enableDiscordBundle","onMounted","_this","on","newVal","color","speaker","member","user","avatarURL","displayName"],"mappings":";;AGAA,AEAA;AFCA;AACA,AEDA;AFEA;AACA,AEFA,ADFA;ADKA,AFLA,ACAA,AECA,IAAIwc,QAAQ,GAAGC,MAAM,CAACC,SAAP,CAAiB,OAAjB,CAAf;ADKA,ACJA,IAAIC,WAAW,GAAGF,MAAM,CAACC,SAAP,CAAiB,UAAjB,EAA6B,uBAA7B,CAAlB;ADKA;AACA,ACLA,SAASE,UAAT,GAAsB;ADMtB,ADPA,AEEI,SAAO;ADMX,AFLe,AGAPvC,IAAAA,KHAgBpD,AGAX,EAAE,QHAA,CAAoBC,GAApB,EAAyB;AEMxC,AFLE,AGAU2F,MAAAA,UAAU,EAAE,SADT;ADOf,AFLE,AIHF,ADGYC,ICHR,CAAC,CJGC,AGAMA,CHALjZ,KAAK,CAACsT,CIHb,ADGoB,CCHL,CDGO,EAFP,EHER,CAAcD,GAAd,CAAL,EAAyB,OIH3B,EACE,QAAQ,CAAC,cAAT,CAAwB,MAAxB,KAAmC,QAAQ,CAAC,IAD9C,EAEE,EAFF;AFSA,AFLI,AGAQ6F,MAAAA,mBAAmB,EAAE;ADMjC,AFLI,AGJW,KADJ,GHML,gDACG3F,IADH,CACQxV,MAAM,CAACgB,SAAP,CAAiByU,QAAjB,CAA0BnR,IAA1B,CAA+BgR,GAA/B,CADR,KAEK,OAAOA,GAAG,CAAClQ,MAAX,KAAsB,QAH7B,EAKE,OAAOnD,KAAK,CAACC,IAAN,CAAWoT,GAAX,CAAP,CALF,KAOE;AEDN,AFEM,ACTS,AEEP8F,IAAAA,KFFgB1F,CAAT,CAAW7C,EEET,EAAE,IFFJ,EAAqB8C,GAArB,EAA0B,UEEV;ADM/B,AFEM,ACTJ,AEEU,SFFH,CEEO0F,GHOH,CAAC/F,CGPO,EHOR,CAAP,AGPkB,IAAZ,QFFQ,OAAOzC,QAAP,KAAoB,QAApB,GAChB,CAAC8C,GAAG,IAAI/I,QAAR,EAAkBrI,gBAAlB,CAAmCsO,QAAnC,CADgB,GAEhBA,QAFK,CAAP;ACQF,AFEG,ACNF,GDRuC,CAetC;AEFF,ACNY+H,MAAAA,QAAQ,CAACU,EAAT,CAAY,QAAZ,EAAsB,UAAUC,MAAV,EAAkB;ADOpD,ACNgBF,QAAAA,KAAK,CAAC5C,KAAN,CAAYwC,UAAZ,GAAyBM,MAAM,CAACC,KAAhC;ADOhB,AFCE,SAAOlG,GAAP;AEAF,AFCC,AGRe+F,QAAAA,KAAK,CAAChR,MAAN;ADQhB,ACPa,OAHD;ADWZ;AACA,ACRY,UAAI0Q,WAAJ,EAAiB;ADS7B,ACRgBA,QAAAA,WAAW,CAACO,EAAZ,CAAe,QAAf,EAAyB,UAAUC,MAAV,EAAkB;ADS3D,ACRoBF,UAAAA,KAAK,CAAC5C,KAAN,CAAYyC,QAAZ,GAAuBK,MAAvB;ADSpB,ACRoBF,UAAAA,KAAK,CAAC5C,KAAN,CAAY0C,mBAAZ,GAAkC,IAAlC;ADSpB;AACA,ACToBE,UAAAA,KAAK,CAAChR,MAAN;ADUpB,ACTiB,SAJD;ADchB,ACTa;ADUb,ACTS;ADUT,AC7BW,GAAP;AD8BJ,ACTC;ADUD,AHnCA;AGoCA,AHnCA,IAAMjM,WI0BS,kBJ1BoB,GAAG,IAAIC,GAAJ,EAAtC;AGoCA,AHpCA,AI2BE,IJ1BIC,+BAA+B,GAAGC,MAAM,CAAC,gBAAD,CAD9C,sQI0Be;ADWf,AHrCA,AI4BE,IJ1BIC,SI0BOwc,EJ1BI,GAAG,IAAIvc,CIwBT,EJxBK,EAFpB;AGsCA,AHtCA,AI8BE,IJ3BIC,UI2BQ,EJ3BI,GAAG,IAHrB,SI8BuB4M,SAAT,EAAmBrI,eAAnB,EAAoCL,YAApC,EAAkDwP,YAAlD,EAAgE;ADS9E,AHvCA,AI+BI,IJ3BEzT,OI2BK2M,QJ3BU,CI2BF,CACb,CJ5BkB,OAJxB,4YI+BmB,EAEb,CAAC;ADOP,AHxCA,AIkCQ,IJ7BF1M,gBAAgB,GAAG,KI6BK,EJlC9B,KIiCO;AJjCP,AImCQ,IJ7BFC,cI6Bc,GJ7BG,GAAG,GI2BnB,KJjCP;AAAA,AIqCQ,IJ9BFC,iBI8BiB,CJ9BC,AI8BA,GJ9BG,SAP3B;AAAA,AIsCU,IJ9BJC,YI8BYkE,KJ9BK,GAAG,OI8BO,CAACJ,MJtClC,GIqCwB;AJrCxB,AIuCU,IJ9BJ7D,YI8BY,OJ9BO,AI4BD,GJ5BI,eAT5B;AAAA,AIyCU,IJ/BJC,cAAc,EI+BE,CJ/BC,WAVvB,MIyC+BkL,KAAT,EAAgB;AJzCtC,AI0CY,IJ/BNjL,aI+Ba,CAAC,MJ/BM,GAAG,OI+BV,EAAmBiL,KAAK,CAACsO,CJ1C5C,II0CsC,CAAYwC,UAA/B,EAA2CpE,IAA3C,CAAgD,EAAhD,CAAP;AJ1CZ,AI2CW,IJ/BL1X,cAAc,GAAG,WAZvB;AAAA,AIqCwB,IJxBlBC,GIwBiB,kBJxBI,GAAG,iBAb9B;AAAA,AIiCO,IJnBDC,CImBA,EAYG,aJ/Ba,GAAG,aAdzB;AAAA,AI8CQ,IJ/BFC,SAAS,CI+BCsD,EJ/BE,OAflB,GI8C4B,CAACL,IADpB;AJ7CT,AI+CQ,IJ/BFhD,SAAS,GAAG,AI+BA,IAFT,GJ7CT;AAAA,AIgDQ,IJ/BFC,SAAS,GAAG,GI+BG,IJhDrB,AI6CS;AJ7CT,AIkDQ,IJhCFC,QAAQ,GAAG,GIgCG6L,GJlDpB,MIkD4B,CAClB,iLADkB,EAElB,CAAC;AJpDX,AIqDY,IJlCN5L,cAAc,GAAGnB,MAAM,CAACoB,EIkCI,CJlCX,CAAW,KIiCvB,CJjCY,CAnBvB;AAAA,AIsDY,IJlCNC,gBIkCkB,CJlCD,GAAGrB,KIgCf,CJhCqB,CAAC,QAAD,CApBhC;AAAA,AIwDY,IJnCNsB,mBImCqB,CAAC,CJnCD,GAAGtB,MAAM,CAAC,YAAD,CArBpC;AAAA,AIyDc,IJnCRuB,cImCgBmD,KJnCG,GAAG1E,MAAM,CAAC,AImCE,CAACsE,SJnCJ,AIkCN,CJxD5B;AAwBA,AIkCc,IJlCV9C,OAAO,OIkCW,KAFM;AJhCd,AIoCA,sBAAY,kBAASoK,KAAT,EAAgB;AJpCfnK,AIqCX,MJrCiB,CAACC,MAAP,CAAc,KIqClBkK,KAAK,CAACsR,OAAN,CAAcC,MAAd,CAAqBC,IAArB,CAA0BC,SAAjC;AJpCd1b,AIqCa,EJrCbA,SAAS,EAAE,IAD4B;AAEvC9B,AI8B0B,EJ9B1BA,OI8ByB,sBJ9BI,EAAEA,6BAFQ;AAGvCE,AIyBS,EJzBTA,KIyBQ,EAYG,wBJrCoB,EAAEA,+BAHM;AAIvCE,AIqCU,EJrCVA,WAAW,EAAEA,WAJ0B,IIyCP,OADrB;AJnCXE,AIqCU,EJrCVA,YAAY,EAAEA,IIqCQ,QJ1CiB,CIwC5B;AJlCXC,AIsCU,EJtCVA,eAAe,EAAEA,IIsCQ,CAAC,UJ5Ca;AAOvCC,AIsCY,EJtCZA,gBAAgB,AIsCIqE,EJtCFrE,aIsCiB,CAACmE,EJ7CG,EI4Cb;AJpC1BlE,AIsCY,EJtCZA,iBAAiB,EAAEA,OIsCW,CAFJ,SJ5Ca;AASvCC,AIuCY,EJvCZA,kBAAkB,EAAEA,AIuCI,kBJhDe,AIgDNqL,KAAT,EAAgB;AJtCxCpL,AIuCc,EJvCdA,iBAAiB,AIuCIoL,EJvCFpL,GIuCO,CAAC0c,OAAN,CAAcC,KJjDI,CIiDlB,CAAqBG,WAA5B;AJtCd7c,AIuCa,EJvCbA,mBAAmB,EAAEA,mBAXkB;AAYvCC,AIgC0B,EJhC1BA,OIgCyB,OJhCX,EAAEA,cAZuB;AAavCC,AI2BW,EJ3BXA,KIeQ,CAFkB,CALnB,aJRa,EAAEA,oBAbiB;AAcvCC,AIyCM,EJzCNA,cAAc,EAAEA,UIyCY,IJvDW,GIqBhC;AJNPC,AIyCM,EJzCNA,gBIyCkB,KJzCG,EAAEA,EIMhB,mBJrBgC;AAgBvCC,AIyCM,EJzCNA,gBAAgB,AIyCE,EJzCAA,OIKX,SJrBgC;AAiBvCC,AIyCM,EJzCNA,SAAS,EAAEA,MIyCQ,GJ1DoB,CIqBhC;AJHPC,AI0CM,EJ1CNA,SAAS,EAAEA,KI0CO,IJ5DqB,cI4DZ4K,KAAT,EAAgB;AJzClC3K,AI0CQ,EJ1CRA,SAAS,EAAEA,EI0CI2K,KAAK,CAACsO,CJ7DkB,II6DxB,CAAYyC,QAAnB;AJzCRzb,AI0CO,EJ1CPA,QAAQ,EAAEA,QApB6B;AAqBvCC,AIAO,EJAPA,GIZI,EAsDG,SJ1CO,EAAEA,cArBuB;AAsBvCE,AI0CM,EJ1CNA,YI0CcgD,KJ1CG,EAAEhD,KI0CO,CAAC4C,EADpB,SJ/DgC;AAuBvC3C,AI2CM,EJ3CNA,gBI2CkB,KJ3CG,EAAEA,WI2CIsK,KAAT,EAAgB,GJlEK;AAwBvCrK,AI2CQ,EJ3CRA,aI2Ce,CAACqK,KJ3CG,AI2CE,CAACsO,CJ3CD3Y,II2CL,CAAYqb,mBAApB;AJnE+B,AIoEhC,CJpEkB,CAA3B,KI+DS;AJpCT,AI2CQ,4BAAsB,OAPrB;AAQD,kBAAY,SARX;AAUD,kBAAY7P,SAAQ,CAClB,mIADkB,EAElB,EAFkB;AAVnB,KAtDH,CAFa,CAAf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","file":"commentary.7084fcfb.js","sourceRoot":"..\\src\\browser\\graphics","sourcesContent":["/* Riot v4.8.7, @license MIT */\nconst COMPONENTS_IMPLEMENTATION_MAP = new Map(),\n      DOM_COMPONENT_INSTANCE_PROPERTY = Symbol('riot-component'),\n      PLUGINS_SET = new Set(),\n      IS_DIRECTIVE = 'is',\n      VALUE_ATTRIBUTE = 'value',\n      MOUNT_METHOD_KEY = 'mount',\n      UPDATE_METHOD_KEY = 'update',\n      UNMOUNT_METHOD_KEY = 'unmount',\n      SHOULD_UPDATE_KEY = 'shouldUpdate',\n      ON_BEFORE_MOUNT_KEY = 'onBeforeMount',\n      ON_MOUNTED_KEY = 'onMounted',\n      ON_BEFORE_UPDATE_KEY = 'onBeforeUpdate',\n      ON_UPDATED_KEY = 'onUpdated',\n      ON_BEFORE_UNMOUNT_KEY = 'onBeforeUnmount',\n      ON_UNMOUNTED_KEY = 'onUnmounted',\n      PROPS_KEY = 'props',\n      STATE_KEY = 'state',\n      SLOTS_KEY = 'slots',\n      ROOT_KEY = 'root',\n      IS_PURE_SYMBOL = Symbol.for('pure'),\n      PARENT_KEY_SYMBOL = Symbol('parent'),\n      ATTRIBUTES_KEY_SYMBOL = Symbol('attributes'),\n      TEMPLATE_KEY_SYMBOL = Symbol('template');\n\nvar globals = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP,\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY,\n  PLUGINS_SET: PLUGINS_SET,\n  IS_DIRECTIVE: IS_DIRECTIVE,\n  VALUE_ATTRIBUTE: VALUE_ATTRIBUTE,\n  MOUNT_METHOD_KEY: MOUNT_METHOD_KEY,\n  UPDATE_METHOD_KEY: UPDATE_METHOD_KEY,\n  UNMOUNT_METHOD_KEY: UNMOUNT_METHOD_KEY,\n  SHOULD_UPDATE_KEY: SHOULD_UPDATE_KEY,\n  ON_BEFORE_MOUNT_KEY: ON_BEFORE_MOUNT_KEY,\n  ON_MOUNTED_KEY: ON_MOUNTED_KEY,\n  ON_BEFORE_UPDATE_KEY: ON_BEFORE_UPDATE_KEY,\n  ON_UPDATED_KEY: ON_UPDATED_KEY,\n  ON_BEFORE_UNMOUNT_KEY: ON_BEFORE_UNMOUNT_KEY,\n  ON_UNMOUNTED_KEY: ON_UNMOUNTED_KEY,\n  PROPS_KEY: PROPS_KEY,\n  STATE_KEY: STATE_KEY,\n  SLOTS_KEY: SLOTS_KEY,\n  ROOT_KEY: ROOT_KEY,\n  IS_PURE_SYMBOL: IS_PURE_SYMBOL,\n  PARENT_KEY_SYMBOL: PARENT_KEY_SYMBOL,\n  ATTRIBUTES_KEY_SYMBOL: ATTRIBUTES_KEY_SYMBOL,\n  TEMPLATE_KEY_SYMBOL: TEMPLATE_KEY_SYMBOL\n});\n\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\nfunction checkType(element, type) {\n  return typeof element === type;\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\nfunction isFunction(value) {\n  return checkType(value, 'function');\n}\n\nfunction noop() {\n  return this;\n}\n/**\n * Autobind the methods of a source object to itself\n * @param   {Object} source - probably a riot tag instance\n * @param   {Array<string>} methods - list of the methods to autobind\n * @returns {Object} the original object received\n */\n\nfunction autobindMethods(source, methods) {\n  methods.forEach(method => {\n    source[method] = source[method].bind(source);\n  });\n  return source;\n}\n/**\n * Call the first argument received only if it's a function otherwise return it as it is\n * @param   {*} source - anything\n * @returns {*} anything\n */\n\nfunction callOrAssign(source) {\n  return isFunction(source) ? source.prototype && source.prototype.constructor ? new source() : source() : source;\n}\n\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\n\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\nfunction dashToCamelCase(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n/**\n * Move all the child nodes from a source tag to another\n * @param   {HTMLElement} source - source node\n * @param   {HTMLElement} target - target node\n * @returns {undefined} it's a void method \\_()_/\n */\n// Ignore this helper because it's needed only for svg tags\n\n\nfunction moveChildren(source, target) {\n  if (source.firstChild) {\n    target.appendChild(source.firstChild);\n    moveChildren(source, target);\n  }\n}\n/**\n * Remove the child nodes from any DOM node\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\n\nfunction cleanNode(node) {\n  clearChildren(node.childNodes);\n}\n/**\n * Clear multiple children in a node\n * @param   {HTMLElement[]} children - direct children nodes\n * @returns {undefined}\n */\n\n\nfunction clearChildren(children) {\n  Array.from(children).forEach(removeNode);\n}\n/**\n * Remove a node from the DOM\n * @param   {HTMLElement} node - target node\n * @returns {undefined}\n */\n\n\nfunction removeNode(node) {\n  const {\n    parentNode\n  } = node;\n  if (node.remove) node.remove();\n  /* istanbul ignore else */\n  else if (parentNode) parentNode.removeChild(node);\n}\n\nconst EACH = 0;\nconst IF = 1;\nconst SIMPLE = 2;\nconst TAG = 3;\nconst SLOT = 4;\nvar bindingTypes = {\n  EACH,\n  IF,\n  SIMPLE,\n  TAG,\n  SLOT\n};\nconst ATTRIBUTE = 0;\nconst EVENT = 1;\nconst TEXT = 2;\nconst VALUE = 3;\nvar expressionTypes = {\n  ATTRIBUTE,\n  EVENT,\n  TEXT,\n  VALUE\n};\n/**\n * Create the template meta object in case of <template> fragments\n * @param   {TemplateChunk} componentTemplate - template chunk object\n * @returns {Object} the meta property that will be passed to the mount function of the TemplateChunk\n */\n\nfunction createTemplateMeta(componentTemplate) {\n  const fragment = componentTemplate.dom.cloneNode(true);\n  return {\n    avoidDOMInjection: true,\n    fragment,\n    children: Array.from(fragment.childNodes)\n  };\n}\n\nconst {\n  indexOf: iOF\n} = [];\n\nconst append = (get, parent, children, start, end, before) => {\n  const isSelect = 'selectedIndex' in parent;\n  let noSelection = isSelect;\n\n  while (start < end) {\n    const child = get(children[start], 1);\n    parent.insertBefore(child, before);\n\n    if (isSelect && noSelection && child.selected) {\n      noSelection = !noSelection;\n      let {\n        selectedIndex\n      } = parent;\n      parent.selectedIndex = selectedIndex < 0 ? start : iOF.call(parent.querySelectorAll('option'), child);\n    }\n\n    start++;\n  }\n};\n\nconst eqeq = (a, b) => a == b;\n\nconst identity = O => O;\n\nconst indexOf = (moreNodes, moreStart, moreEnd, lessNodes, lessStart, lessEnd, compare) => {\n  const length = lessEnd - lessStart;\n  /* istanbul ignore if */\n\n  if (length < 1) return -1;\n\n  while (moreEnd - moreStart >= length) {\n    let m = moreStart;\n    let l = lessStart;\n\n    while (m < moreEnd && l < lessEnd && compare(moreNodes[m], lessNodes[l])) {\n      m++;\n      l++;\n    }\n\n    if (l === lessEnd) return moreStart;\n    moreStart = m + 1;\n  }\n\n  return -1;\n};\n\nconst isReversed = (futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare) => {\n  while (currentStart < currentEnd && compare(currentNodes[currentStart], futureNodes[futureEnd - 1])) {\n    currentStart++;\n    futureEnd--;\n  }\n\n  return futureEnd === 0;\n};\n\nconst next = (get, list, i, length, before) => i < length ? get(list[i], 0) : 0 < i ? get(list[i - 1], -0).nextSibling : before;\n\nconst remove = (get, children, start, end) => {\n  while (start < end) drop(get(children[start++], -1));\n}; // - - - - - - - - - - - - - - - - - - -\n// diff related constants and utilities\n// - - - - - - - - - - - - - - - - - - -\n\n\nconst DELETION = -1;\nconst INSERTION = 1;\nconst SKIP = 0;\nconst SKIP_OND = 50;\n\nconst HS = (futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges) => {\n  let k = 0;\n  /* istanbul ignore next */\n\n  let minLen = futureChanges < currentChanges ? futureChanges : currentChanges;\n  const link = Array(minLen++);\n  const tresh = Array(minLen);\n  tresh[0] = -1;\n\n  for (let i = 1; i < minLen; i++) tresh[i] = currentEnd;\n\n  const nodes = currentNodes.slice(currentStart, currentEnd);\n\n  for (let i = futureStart; i < futureEnd; i++) {\n    const index = nodes.indexOf(futureNodes[i]);\n\n    if (-1 < index) {\n      const idxInOld = index + currentStart;\n      k = findK(tresh, minLen, idxInOld);\n      /* istanbul ignore else */\n\n      if (-1 < k) {\n        tresh[k] = idxInOld;\n        link[k] = {\n          newi: i,\n          oldi: idxInOld,\n          prev: link[k - 1]\n        };\n      }\n    }\n  }\n\n  k = --minLen;\n  --currentEnd;\n\n  while (tresh[k] > currentEnd) --k;\n\n  minLen = currentChanges + futureChanges - k;\n  const diff = Array(minLen);\n  let ptr = link[k];\n  --futureEnd;\n\n  while (ptr) {\n    const {\n      newi,\n      oldi\n    } = ptr;\n\n    while (futureEnd > newi) {\n      diff[--minLen] = INSERTION;\n      --futureEnd;\n    }\n\n    while (currentEnd > oldi) {\n      diff[--minLen] = DELETION;\n      --currentEnd;\n    }\n\n    diff[--minLen] = SKIP;\n    --futureEnd;\n    --currentEnd;\n    ptr = ptr.prev;\n  }\n\n  while (futureEnd >= futureStart) {\n    diff[--minLen] = INSERTION;\n    --futureEnd;\n  }\n\n  while (currentEnd >= currentStart) {\n    diff[--minLen] = DELETION;\n    --currentEnd;\n  }\n\n  return diff;\n}; // this is pretty much the same petit-dom code without the delete map part\n// https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L556-L561\n\n\nconst OND = (futureNodes, futureStart, rows, currentNodes, currentStart, cols, compare) => {\n  const length = rows + cols;\n  const v = [];\n  let d, k, r, c, pv, cv, pd;\n\n  outer: for (d = 0; d <= length; d++) {\n    /* istanbul ignore if */\n    if (d > SKIP_OND) return null;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    cv = v[d] = [];\n\n    for (k = -d; k <= d; k += 2) {\n      if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n        c = pv[pd + k + 1];\n      } else {\n        c = pv[pd + k - 1] + 1;\n      }\n\n      r = c - k;\n\n      while (c < cols && r < rows && compare(currentNodes[currentStart + c], futureNodes[futureStart + r])) {\n        c++;\n        r++;\n      }\n\n      if (c === cols && r === rows) {\n        break outer;\n      }\n\n      cv[d + k] = c;\n    }\n  }\n\n  const diff = Array(d / 2 + length / 2);\n  let diffIdx = diff.length - 1;\n\n  for (d = v.length - 1; d >= 0; d--) {\n    while (c > 0 && r > 0 && compare(currentNodes[currentStart + c - 1], futureNodes[futureStart + r - 1])) {\n      // diagonal edge = equality\n      diff[diffIdx--] = SKIP;\n      c--;\n      r--;\n    }\n\n    if (!d) break;\n    pd = d - 1;\n    /* istanbul ignore next */\n\n    pv = d ? v[d - 1] : [0, 0];\n    k = c - r;\n\n    if (k === -d || k !== d && pv[pd + k - 1] < pv[pd + k + 1]) {\n      // vertical edge = insertion\n      r--;\n      diff[diffIdx--] = INSERTION;\n    } else {\n      // horizontal edge = deletion\n      c--;\n      diff[diffIdx--] = DELETION;\n    }\n  }\n\n  return diff;\n};\n\nconst applyDiff = (diff, get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before) => {\n  const live = [];\n  const length = diff.length;\n  let currentIndex = currentStart;\n  let i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        futureStart++;\n        currentIndex++;\n        break;\n\n      case INSERTION:\n        // TODO: bulk appends for sequential nodes\n        live.push(futureNodes[futureStart]);\n        append(get, parentNode, futureNodes, futureStart++, futureStart, currentIndex < currentLength ? get(currentNodes[currentIndex], 0) : before);\n        break;\n\n      case DELETION:\n        currentIndex++;\n        break;\n    }\n  }\n\n  i = 0;\n\n  while (i < length) {\n    switch (diff[i++]) {\n      case SKIP:\n        currentStart++;\n        break;\n\n      case DELETION:\n        // TODO: bulk removes for sequential nodes\n        if (-1 < live.indexOf(currentNodes[currentStart])) currentStart++;else remove(get, currentNodes, currentStart++, currentStart);\n        break;\n    }\n  }\n};\n\nconst findK = (ktr, length, j) => {\n  let lo = 1;\n  let hi = length;\n\n  while (lo < hi) {\n    const mid = (lo + hi) / 2 >>> 0;\n    if (j < ktr[mid]) hi = mid;else lo = mid + 1;\n  }\n\n  return lo;\n};\n\nconst smartDiff = (get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before) => {\n  applyDiff(OND(futureNodes, futureStart, futureChanges, currentNodes, currentStart, currentChanges, compare) || HS(futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges), get, parentNode, futureNodes, futureStart, currentNodes, currentStart, currentLength, before);\n};\n\nconst drop = node => (node.remove || dropChild).call(node);\n\nfunction dropChild() {\n  const {\n    parentNode\n  } = this;\n  /* istanbul ignore else */\n\n  if (parentNode) parentNode.removeChild(this);\n}\n/*! (c) 2018 Andrea Giammarchi (ISC) */\n\n\nconst domdiff = (parentNode, // where changes happen\ncurrentNodes, // Array of current items/nodes\nfutureNodes, // Array of future items/nodes\noptions // optional object with one of the following properties\n//  before: domNode\n//  compare(generic, generic) => true if same generic\n//  node(generic) => Node\n) => {\n  if (!options) options = {};\n  const compare = options.compare || eqeq;\n  const get = options.node || identity;\n  const before = options.before == null ? null : get(options.before, 0);\n  const currentLength = currentNodes.length;\n  let currentEnd = currentLength;\n  let currentStart = 0;\n  let futureEnd = futureNodes.length;\n  let futureStart = 0; // common prefix\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentStart], futureNodes[futureStart])) {\n    currentStart++;\n    futureStart++;\n  } // common suffix\n\n\n  while (currentStart < currentEnd && futureStart < futureEnd && compare(currentNodes[currentEnd - 1], futureNodes[futureEnd - 1])) {\n    currentEnd--;\n    futureEnd--;\n  }\n\n  const currentSame = currentStart === currentEnd;\n  const futureSame = futureStart === futureEnd; // same list\n\n  if (currentSame && futureSame) return futureNodes; // only stuff to add\n\n  if (currentSame && futureStart < futureEnd) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentStart, currentLength, before));\n    return futureNodes;\n  } // only stuff to remove\n\n\n  if (futureSame && currentStart < currentEnd) {\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  }\n\n  const currentChanges = currentEnd - currentStart;\n  const futureChanges = futureEnd - futureStart;\n  let i = -1; // 2 simple indels: the shortest sequence is a subsequence of the longest\n\n  if (currentChanges < futureChanges) {\n    i = indexOf(futureNodes, futureStart, futureEnd, currentNodes, currentStart, currentEnd, compare); // inner diff\n\n    if (-1 < i) {\n      append(get, parentNode, futureNodes, futureStart, i, get(currentNodes[currentStart], 0));\n      append(get, parentNode, futureNodes, i + currentChanges, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n      return futureNodes;\n    }\n  }\n  /* istanbul ignore else */\n  else if (futureChanges < currentChanges) {\n      i = indexOf(currentNodes, currentStart, currentEnd, futureNodes, futureStart, futureEnd, compare); // outer diff\n\n      if (-1 < i) {\n        remove(get, currentNodes, currentStart, i);\n        remove(get, currentNodes, i + futureChanges, currentEnd);\n        return futureNodes;\n      }\n    } // common case with one replacement for many nodes\n  // or many nodes replaced for a single one\n\n  /* istanbul ignore else */\n\n\n  if (currentChanges < 2 || futureChanges < 2) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, get(currentNodes[currentStart], 0));\n    remove(get, currentNodes, currentStart, currentEnd);\n    return futureNodes;\n  } // the half match diff part has been skipped in petit-dom\n  // https://github.com/yelouafi/petit-dom/blob/bd6f5c919b5ae5297be01612c524c40be45f14a7/src/vdom.js#L391-L397\n  // accordingly, I think it's safe to skip in here too\n  // if one day it'll come out like the speediest thing ever to do\n  // then I might add it in here too\n  // Extra: before going too fancy, what about reversed lists ?\n  //        This should bail out pretty quickly if that's not the case.\n\n\n  if (currentChanges === futureChanges && isReversed(futureNodes, futureEnd, currentNodes, currentStart, currentEnd, compare)) {\n    append(get, parentNode, futureNodes, futureStart, futureEnd, next(get, currentNodes, currentEnd, currentLength, before));\n    return futureNodes;\n  } // last resort through a smart diff\n\n\n  smartDiff(get, parentNode, futureNodes, futureStart, futureEnd, futureChanges, currentNodes, currentStart, currentEnd, currentChanges, currentLength, compare, before);\n  return futureNodes;\n};\n/**\n * Quick type checking\n * @param   {*} element - anything\n * @param   {string} type - type definition\n * @returns {boolean} true if the type corresponds\n */\n\n\nfunction checkType$1(element, type) {\n  return typeof element === type;\n}\n/**\n * Check if an element is part of an svg\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if we are in an svg context\n */\n\n\nfunction isSvg(el) {\n  const owner = el.ownerSVGElement;\n  return !!owner || owner === null;\n}\n/**\n * Check if an element is a template tag\n * @param   {HTMLElement}  el - element to check\n * @returns {boolean} true if it's a <template>\n */\n\n\nfunction isTemplate(el) {\n  return !isNil(el.content);\n}\n/**\n * Check that will be passed if its argument is a function\n * @param   {*} value - value to check\n * @returns {boolean} - true if the value is a function\n */\n\n\nfunction isFunction$1(value) {\n  return checkType$1(value, 'function');\n}\n/**\n * Check if a value is a Boolean\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is a boolean\n */\n\n\nfunction isBoolean(value) {\n  return checkType$1(value, 'boolean');\n}\n/**\n * Check if a value is an Object\n * @param   {*}  value - anything\n * @returns {boolean} true only for the value is an object\n */\n\n\nfunction isObject(value) {\n  return !isNil(value) && checkType$1(value, 'object');\n}\n/**\n * Check if a value is null or undefined\n * @param   {*}  value - anything\n * @returns {boolean} true only for the 'undefined' and 'null' types\n */\n\n\nfunction isNil(value) {\n  return value === null || value === undefined;\n}\n\nconst UNMOUNT_SCOPE = Symbol('unmount');\nconst EachBinding = Object.seal({\n  // dynamic binding properties\n  // childrenMap: null,\n  // node: null,\n  // root: null,\n  // condition: null,\n  // evaluate: null,\n  // template: null,\n  // isTemplateTag: false,\n  nodes: [],\n\n  // getKey: null,\n  // indexName: null,\n  // itemName: null,\n  // afterPlaceholder: null,\n  // placeholder: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const {\n      placeholder,\n      nodes,\n      childrenMap\n    } = this;\n    const collection = scope === UNMOUNT_SCOPE ? null : this.evaluate(scope);\n    const items = collection ? Array.from(collection) : [];\n    const parent = placeholder.parentNode; // prepare the diffing\n\n    const {\n      newChildrenMap,\n      batches,\n      futureNodes\n    } = createPatch(items, scope, parentScope, this); // patch the DOM only if there are new nodes\n\n    domdiff(parent, nodes, futureNodes, {\n      before: placeholder,\n      node: patch(Array.from(childrenMap.values()), parentScope)\n    }); // trigger the mounts and the updates\n\n    batches.forEach(fn => fn()); // update the children map\n\n    this.childrenMap = newChildrenMap;\n    this.nodes = futureNodes;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.update(UNMOUNT_SCOPE, parentScope);\n    return this;\n  }\n\n});\n/**\n * Patch the DOM while diffing\n * @param   {TemplateChunk[]} redundant - redundant tepmplate chunks\n * @param   {*} parentScope - scope of the parent template\n * @returns {Function} patch function used by domdiff\n */\n\nfunction patch(redundant, parentScope) {\n  return (item, info) => {\n    if (info < 0) {\n      const element = redundant.pop();\n\n      if (element) {\n        const {\n          template,\n          context\n        } = element; // notice that we pass null as last argument because\n        // the root node and its children will be removed by domdiff\n\n        template.unmount(context, parentScope, null);\n      }\n    }\n\n    return item;\n  };\n}\n/**\n * Check whether a template must be filtered from a loop\n * @param   {Function} condition - filter function\n * @param   {Object} context - argument passed to the filter function\n * @returns {boolean} true if this item should be skipped\n */\n\n\nfunction mustFilterItem(condition, context) {\n  return condition ? Boolean(condition(context)) === false : false;\n}\n/**\n * Extend the scope of the looped template\n * @param   {Object} scope - current template scope\n * @param   {string} options.itemName - key to identify the looped item in the new context\n * @param   {string} options.indexName - key to identify the index of the looped item\n * @param   {number} options.index - current index\n * @param   {*} options.item - collection item looped\n * @returns {Object} enhanced scope object\n */\n\n\nfunction extendScope(scope, _ref) {\n  let {\n    itemName,\n    indexName,\n    index,\n    item\n  } = _ref;\n  scope[itemName] = item;\n  if (indexName) scope[indexName] = index;\n  return scope;\n}\n/**\n * Loop the current template items\n * @param   {Array} items - expression collection value\n * @param   {*} scope - template scope\n * @param   {*} parentScope - scope of the parent template\n * @param   {EeachBinding} binding - each binding object instance\n * @returns {Object} data\n * @returns {Map} data.newChildrenMap - a Map containing the new children template structure\n * @returns {Array} data.batches - array containing the template lifecycle functions to trigger\n * @returns {Array} data.futureNodes - array containing the nodes we need to diff\n */\n\n\nfunction createPatch(items, scope, parentScope, binding) {\n  const {\n    condition,\n    template,\n    childrenMap,\n    itemName,\n    getKey,\n    indexName,\n    root,\n    isTemplateTag\n  } = binding;\n  const newChildrenMap = new Map();\n  const batches = [];\n  const futureNodes = [];\n  items.forEach((item, index) => {\n    const context = extendScope(Object.create(scope), {\n      itemName,\n      indexName,\n      index,\n      item\n    });\n    const key = getKey ? getKey(context) : index;\n    const oldItem = childrenMap.get(key);\n\n    if (mustFilterItem(condition, context)) {\n      return;\n    }\n\n    const componentTemplate = oldItem ? oldItem.template : template.clone();\n    const el = oldItem ? componentTemplate.el : root.cloneNode();\n    const mustMount = !oldItem;\n    const meta = isTemplateTag && mustMount ? createTemplateMeta(componentTemplate) : {};\n\n    if (mustMount) {\n      batches.push(() => componentTemplate.mount(el, context, parentScope, meta));\n    } else {\n      batches.push(() => componentTemplate.update(context, parentScope));\n    } // create the collection of nodes to update or to add\n    // in case of template tags we need to add all its children nodes\n\n\n    if (isTemplateTag) {\n      const children = meta.children || componentTemplate.children;\n      futureNodes.push(...children);\n    } else {\n      futureNodes.push(el);\n    } // delete the old item from the children map\n\n\n    childrenMap.delete(key); // update the children map\n\n    newChildrenMap.set(key, {\n      template: componentTemplate,\n      context,\n      index\n    });\n  });\n  return {\n    newChildrenMap,\n    batches,\n    futureNodes\n  };\n}\n\nfunction create(node, _ref2) {\n  let {\n    evaluate,\n    condition,\n    itemName,\n    indexName,\n    getKey,\n    template\n  } = _ref2;\n  const placeholder = document.createTextNode('');\n  const parent = node.parentNode;\n  const root = node.cloneNode();\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, EachBinding, {\n    childrenMap: new Map(),\n    node,\n    root,\n    condition,\n    evaluate,\n    isTemplateTag: isTemplate(root),\n    template: template.createDOM(node),\n    getKey,\n    indexName,\n    itemName,\n    placeholder\n  });\n}\n/**\n * Binding responsible for the `if` directive\n */\n\n\nconst IfBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // isTemplateTag: false,\n  // placeholder: null,\n  // template: null,\n  // API methods\n  mount(scope, parentScope) {\n    return this.update(scope, parentScope);\n  },\n\n  update(scope, parentScope) {\n    const value = !!this.evaluate(scope);\n    const mustMount = !this.value && value;\n    const mustUnmount = this.value && !value;\n\n    const mount = () => {\n      const pristine = this.node.cloneNode();\n      this.placeholder.parentNode.insertBefore(pristine, this.placeholder);\n      this.template = this.template.clone();\n      this.template.mount(pristine, scope, parentScope);\n    };\n\n    switch (true) {\n      case mustMount:\n        mount();\n        break;\n\n      case mustUnmount:\n        this.unmount(scope);\n        break;\n\n      default:\n        if (value) this.template.update(scope, parentScope);\n    }\n\n    this.value = value;\n    return this;\n  },\n\n  unmount(scope, parentScope) {\n    this.template.unmount(scope, parentScope, true);\n    return this;\n  }\n\n});\n\nfunction create$1(node, _ref3) {\n  let {\n    evaluate,\n    template\n  } = _ref3;\n  const parent = node.parentNode;\n  const placeholder = document.createTextNode('');\n  parent.insertBefore(placeholder, node);\n  removeNode(node);\n  return Object.assign({}, IfBinding, {\n    node,\n    evaluate,\n    placeholder,\n    template: template.createDOM(node)\n  });\n}\n/**\n * Returns the memoized (cached) function.\n * // borrowed from https://www.30secondsofcode.org/js/s/memoize\n * @param {Function} fn - function to memoize\n * @returns {Function} memoize function\n */\n\n\nfunction memoize(fn) {\n  const cache = new Map();\n\n  const cached = val => {\n    return cache.has(val) ? cache.get(val) : cache.set(val, fn.call(this, val)) && cache.get(val);\n  };\n\n  cached.cache = cache;\n  return cached;\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\n\nfunction evaluateAttributeExpressions(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const {\n      value,\n      type\n    } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE:\n        return Object.assign({}, acc, {}, value);\n      // value attribute\n\n      case type === VALUE:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\nconst REMOVE_ATTRIBUTE = 'removeAttribute';\nconst SET_ATTIBUTE = 'setAttribute';\nconst ElementProto = typeof Element === 'undefined' ? {} : Element.prototype;\nconst isNativeHtmlProperty = memoize(name => ElementProto.hasOwnProperty(name)); // eslint-disable-line\n\n/**\n * Add all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing the attributes names and values\n * @returns {undefined} sorry it's a void function :(\n */\n\nfunction setAllAttributes(node, attributes) {\n  Object.entries(attributes).forEach((_ref4) => {\n    let [name, value] = _ref4;\n    return attributeExpression(node, {\n      name\n    }, value);\n  });\n}\n/**\n * Remove all the attributes provided\n * @param   {HTMLElement} node - target node\n * @param   {Object} attributes - object containing all the attribute names\n * @returns {undefined} sorry it's a void function :(\n */\n\n\nfunction removeAllAttributes(node, attributes) {\n  Object.keys(attributes).forEach(attribute => node.removeAttribute(attribute));\n}\n/**\n * This methods handles the DOM attributes updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - attribute name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - the old expression cached value\n * @returns {undefined}\n */\n\n\nfunction attributeExpression(node, _ref5, value, oldValue) {\n  let {\n    name\n  } = _ref5;\n\n  // is it a spread operator? {...attributes}\n  if (!name) {\n    // is the value still truthy?\n    if (value) {\n      setAllAttributes(node, value);\n    } else if (oldValue) {\n      // otherwise remove all the old attributes\n      removeAllAttributes(node, oldValue);\n    }\n\n    return;\n  } // handle boolean attributes\n\n\n  if (!isNativeHtmlProperty(name) && (isBoolean(value) || isObject(value) || isFunction$1(value))) {\n    node[name] = value;\n  }\n\n  node[getMethod(value)](name, normalizeValue(name, value));\n}\n/**\n * Get the attribute modifier method\n * @param   {*} value - if truthy we return `setAttribute` othewise `removeAttribute`\n * @returns {string} the node attribute modifier method name\n */\n\n\nfunction getMethod(value) {\n  return isNil(value) || value === false || value === '' || isObject(value) || isFunction$1(value) ? REMOVE_ATTRIBUTE : SET_ATTIBUTE;\n}\n/**\n * Get the value as string\n * @param   {string} name - attribute name\n * @param   {*} value - user input value\n * @returns {string} input value as string\n */\n\n\nfunction normalizeValue(name, value) {\n  // be sure that expressions like selected={ true } will be always rendered as selected='selected'\n  if (value === true) return name;\n  return value;\n}\n\nconst RE_EVENTS_PREFIX = /^on/;\n/**\n * Set a new event listener\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {string} expression.name - event name\n * @param   {*} value - new expression value\n * @param   {*} oldValue - old expression value\n * @returns {value} the callback just received\n */\n\nfunction eventExpression(node, _ref6, value, oldValue) {\n  let {\n    name\n  } = _ref6;\n  const normalizedEventName = name.replace(RE_EVENTS_PREFIX, '');\n\n  if (oldValue) {\n    node.removeEventListener(normalizedEventName, oldValue);\n  }\n\n  if (value) {\n    node.addEventListener(normalizedEventName, value, false);\n  }\n}\n/**\n * Normalize the user value in order to render a empty string in case of falsy values\n * @param   {*} value - user input value\n * @returns {string} hopefully a string\n */\n\n\nfunction normalizeStringValue(value) {\n  return isNil(value) ? '' : value;\n}\n/**\n * Get the the target text node to update or create one from of a comment node\n * @param   {HTMLElement} node - any html element containing childNodes\n * @param   {number} childNodeIndex - index of the text node in the childNodes list\n * @returns {HTMLTextNode} the text node to update\n */\n\n\nconst getTextNode = (node, childNodeIndex) => {\n  const target = node.childNodes[childNodeIndex];\n\n  if (target.nodeType === Node.COMMENT_NODE) {\n    const textNode = document.createTextNode('');\n    node.replaceChild(textNode, target);\n    return textNode;\n  }\n\n  return target;\n};\n/**\n * This methods handles a simple text expression update\n * @param   {HTMLElement} node - target node\n * @param   {Object} data - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\n\nfunction textExpression(node, data, value) {\n  node.data = normalizeStringValue(value);\n}\n/**\n * This methods handles the input fileds value updates\n * @param   {HTMLElement} node - target node\n * @param   {Object} expression - expression object\n * @param   {*} value - new expression value\n * @returns {undefined}\n */\n\n\nfunction valueExpression(node, expression, value) {\n  node.value = normalizeStringValue(value);\n}\n\nvar expressions = {\n  [ATTRIBUTE]: attributeExpression,\n  [EVENT]: eventExpression,\n  [TEXT]: textExpression,\n  [VALUE]: valueExpression\n};\nconst Expression = Object.seal({\n  // Static props\n  // node: null,\n  // value: null,\n  // API methods\n\n  /**\n   * Mount the expression evaluating its initial value\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  mount(scope) {\n    // hopefully a pure function\n    this.value = this.evaluate(scope); // IO() DOM updates\n\n    apply(this, this.value);\n    return this;\n  },\n\n  /**\n   * Update the expression if its value changed\n   * @param   {*} scope - argument passed to the expression to evaluate its current values\n   * @returns {Expression} self\n   */\n  update(scope) {\n    // pure function\n    const value = this.evaluate(scope);\n\n    if (this.value !== value) {\n      // IO() DOM updates\n      apply(this, value);\n      this.value = value;\n    }\n\n    return this;\n  },\n\n  /**\n   * Expression teardown method\n   * @returns {Expression} self\n   */\n  unmount() {\n    // unmount only the event handling expressions\n    if (this.type === EVENT) apply(this, null);\n    return this;\n  }\n\n});\n/**\n * IO() function to handle the DOM updates\n * @param {Expression} expression - expression object\n * @param {*} value - current expression value\n * @returns {undefined}\n */\n\nfunction apply(expression, value) {\n  return expressions[expression.type](expression.node, expression, value, expression.value);\n}\n\nfunction create$2(node, data) {\n  return Object.assign({}, Expression, {}, data, {\n    node: data.type === TEXT ? getTextNode(node, data.childNodeIndex) : node\n  });\n}\n/**\n * Create a flat object having as keys a list of methods that if dispatched will propagate\n * on the whole collection\n * @param   {Array} collection - collection to iterate\n * @param   {Array<string>} methods - methods to execute on each item of the collection\n * @param   {*} context - context returned by the new methods created\n * @returns {Object} a new object to simplify the the nested methods dispatching\n */\n\n\nfunction flattenCollectionMethods(collection, methods, context) {\n  return methods.reduce((acc, method) => {\n    return Object.assign({}, acc, {\n      [method]: scope => {\n        return collection.map(item => item[method](scope)) && context;\n      }\n    });\n  }, {});\n}\n\nfunction create$3(node, _ref7) {\n  let {\n    expressions\n  } = _ref7;\n  return Object.assign({}, flattenCollectionMethods(expressions.map(expression => create$2(node, expression)), ['mount', 'update', 'unmount']));\n}\n\nfunction extendParentScope(attributes, scope, parentScope) {\n  if (!attributes || !attributes.length) return parentScope;\n  const expressions = attributes.map(attr => Object.assign({}, attr, {\n    value: attr.evaluate(scope)\n  }));\n  return Object.assign(Object.create(parentScope || null), evaluateAttributeExpressions(expressions));\n}\n\nconst SlotBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // name: null,\n  attributes: [],\n\n  // template: null,\n  getTemplateScope(scope, parentScope) {\n    return extendParentScope(this.attributes, scope, parentScope);\n  },\n\n  // API methods\n  mount(scope, parentScope) {\n    const templateData = scope.slots ? scope.slots.find((_ref8) => {\n      let {\n        id\n      } = _ref8;\n      return id === this.name;\n    }) : false;\n    const {\n      parentNode\n    } = this.node;\n    this.template = templateData && create$6(templateData.html, templateData.bindings).createDOM(parentNode);\n\n    if (this.template) {\n      this.template.mount(this.node, this.getTemplateScope(scope, parentScope));\n      this.template.children = moveSlotInnerContent(this.node);\n    }\n\n    removeNode(this.node);\n    return this;\n  },\n\n  update(scope, parentScope) {\n    if (this.template) {\n      this.template.update(this.getTemplateScope(scope, parentScope));\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.template) {\n      this.template.unmount(this.getTemplateScope(scope, parentScope), null, mustRemoveRoot);\n    }\n\n    return this;\n  }\n\n});\n/**\n * Move the inner content of the slots outside of them\n * @param   {HTMLNode} slot - slot node\n * @param   {HTMLElement} children - array to fill with the child nodes detected\n * @returns {HTMLElement[]} list of the node moved\n */\n\nfunction moveSlotInnerContent(slot, children) {\n  if (children === void 0) {\n    children = [];\n  }\n\n  const child = slot.firstChild;\n\n  if (child) {\n    slot.parentNode.insertBefore(child, slot);\n    return [child, ...moveSlotInnerContent(slot)];\n  }\n\n  return children;\n}\n/**\n * Create a single slot binding\n * @param   {HTMLElement} node - slot node\n * @param   {string} options.name - slot id\n * @returns {Object} Slot binding object\n */\n\n\nfunction createSlot(node, _ref9) {\n  let {\n    name,\n    attributes\n  } = _ref9;\n  return Object.assign({}, SlotBinding, {\n    attributes,\n    node,\n    name\n  });\n}\n/**\n * Create a new tag object if it was registered before, otherwise fallback to the simple\n * template chunk\n * @param   {Function} component - component factory function\n * @param   {Array<Object>} slots - array containing the slots markup\n * @param   {Array} attributes - dynamic attributes that will be received by the tag element\n * @returns {TagImplementation|TemplateChunk} a tag implementation or a template chunk as fallback\n */\n\n\nfunction getTag(component, slots, attributes) {\n  if (slots === void 0) {\n    slots = [];\n  }\n\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  // if this tag was registered before we will return its implementation\n  if (component) {\n    return component({\n      slots,\n      attributes\n    });\n  } // otherwise we return a template chunk\n\n\n  return create$6(slotsToMarkup(slots), [...slotBindings(slots), {\n    // the attributes should be registered as binding\n    // if we fallback to a normal template chunk\n    expressions: attributes.map(attr => {\n      return Object.assign({\n        type: ATTRIBUTE\n      }, attr);\n    })\n  }]);\n}\n/**\n * Merge all the slots bindings into a single array\n * @param   {Array<Object>} slots - slots collection\n * @returns {Array<Bindings>} flatten bindings array\n */\n\n\nfunction slotBindings(slots) {\n  return slots.reduce((acc, _ref10) => {\n    let {\n      bindings\n    } = _ref10;\n    return acc.concat(bindings);\n  }, []);\n}\n/**\n * Merge all the slots together in a single markup string\n * @param   {Array<Object>} slots - slots collection\n * @returns {string} markup of all the slots in a single string\n */\n\n\nfunction slotsToMarkup(slots) {\n  return slots.reduce((acc, slot) => {\n    return acc + slot.html;\n  }, '');\n}\n\nconst TagBinding = Object.seal({\n  // dynamic binding properties\n  // node: null,\n  // evaluate: null,\n  // name: null,\n  // slots: null,\n  // tag: null,\n  // attributes: null,\n  // getComponent: null,\n  mount(scope) {\n    return this.update(scope);\n  },\n\n  update(scope, parentScope) {\n    const name = this.evaluate(scope); // simple update\n\n    if (name === this.name) {\n      this.tag.update(scope);\n    } else {\n      // unmount the old tag if it exists\n      this.unmount(scope, parentScope, true); // mount the new tag\n\n      this.name = name;\n      this.tag = getTag(this.getComponent(name), this.slots, this.attributes);\n      this.tag.mount(this.node, scope);\n    }\n\n    return this;\n  },\n\n  unmount(scope, parentScope, keepRootTag) {\n    if (this.tag) {\n      // keep the root tag\n      this.tag.unmount(keepRootTag);\n    }\n\n    return this;\n  }\n\n});\n\nfunction create$4(node, _ref11) {\n  let {\n    evaluate,\n    getComponent,\n    slots,\n    attributes\n  } = _ref11;\n  return Object.assign({}, TagBinding, {\n    node,\n    evaluate,\n    slots,\n    attributes,\n    getComponent\n  });\n}\n\nvar bindings = {\n  [IF]: create$1,\n  [SIMPLE]: create$3,\n  [EACH]: create,\n  [TAG]: create$4,\n  [SLOT]: createSlot\n};\n/**\n * Text expressions in a template tag will get childNodeIndex value normalized\n * depending on the position of the <template> tag offset\n * @param   {Expression[]} expressions - riot expressions array\n * @param   {number} textExpressionsOffset - offset of the <template> tag\n * @returns {Expression[]} expressions containing the text expressions normalized\n */\n\nfunction fixTextExpressionsOffset(expressions, textExpressionsOffset) {\n  return expressions.map(e => e.type === TEXT ? Object.assign({}, e, {\n    childNodeIndex: e.childNodeIndex + textExpressionsOffset\n  }) : e);\n}\n/**\n * Bind a new expression object to a DOM node\n * @param   {HTMLElement} root - DOM node where to bind the expression\n * @param   {Object} binding - binding data\n * @param   {number|null} templateTagOffset - if it's defined we need to fix the text expressions childNodeIndex offset\n * @returns {Binding} Binding object\n */\n\n\nfunction create$5(root, binding, templateTagOffset) {\n  const {\n    selector,\n    type,\n    redundantAttribute,\n    expressions\n  } = binding; // find the node to apply the bindings\n\n  const node = selector ? root.querySelector(selector) : root; // remove eventually additional attributes created only to select this node\n\n  if (redundantAttribute) node.removeAttribute(redundantAttribute);\n  const bindingExpressions = expressions || []; // init the binding\n\n  return (bindings[type] || bindings[SIMPLE])(node, Object.assign({}, binding, {\n    expressions: templateTagOffset && !selector ? fixTextExpressionsOffset(bindingExpressions, templateTagOffset) : bindingExpressions\n  }));\n} // in this case a simple innerHTML is enough\n\n\nfunction createHTMLTree(html, root) {\n  const template = isTemplate(root) ? root : document.createElement('template');\n  template.innerHTML = html;\n  return template.content;\n} // for svg nodes we need a bit more work\n\n\nfunction createSVGTree(html, container) {\n  // create the SVGNode\n  const svgNode = container.ownerDocument.importNode(new window.DOMParser().parseFromString(`<svg xmlns=\"http://www.w3.org/2000/svg\">${html}</svg>`, 'application/xml').documentElement, true);\n  return svgNode;\n}\n/**\n * Create the DOM that will be injected\n * @param {Object} root - DOM node to find out the context where the fragment will be created\n * @param   {string} html - DOM to create as string\n * @returns {HTMLDocumentFragment|HTMLElement} a new html fragment\n */\n\n\nfunction createDOMTree(root, html) {\n  if (isSvg(root)) return createSVGTree(html, root);\n  return createHTMLTree(html, root);\n}\n/**\n * Inject the DOM tree into a target node\n * @param   {HTMLElement} el - target element\n * @param   {HTMLFragment|SVGElement} dom - dom tree to inject\n * @returns {undefined}\n */\n\n\nfunction injectDOM(el, dom) {\n  switch (true) {\n    case isSvg(el):\n      moveChildren(dom, el);\n      break;\n\n    case isTemplate(el):\n      el.parentNode.replaceChild(dom, el);\n      break;\n\n    default:\n      el.appendChild(dom);\n  }\n}\n/**\n * Create the Template DOM skeleton\n * @param   {HTMLElement} el - root node where the DOM will be injected\n * @param   {string} html - markup that will be injected into the root node\n * @returns {HTMLFragment} fragment that will be injected into the root node\n */\n\n\nfunction createTemplateDOM(el, html) {\n  return html && (typeof html === 'string' ? createDOMTree(el, html) : html);\n}\n/**\n * Template Chunk model\n * @type {Object}\n */\n\n\nconst TemplateChunk = Object.freeze({\n  // Static props\n  // bindings: null,\n  // bindingsData: null,\n  // html: null,\n  // isTemplateTag: false,\n  // fragment: null,\n  // children: null,\n  // dom: null,\n  // el: null,\n\n  /**\n   * Create the template DOM structure that will be cloned on each mount\n   * @param   {HTMLElement} el - the root node\n   * @returns {TemplateChunk} self\n   */\n  createDOM(el) {\n    // make sure that the DOM gets created before cloning the template\n    this.dom = this.dom || createTemplateDOM(el, this.html);\n    return this;\n  },\n\n  // API methods\n\n  /**\n   * Attach the template to a DOM node\n   * @param   {HTMLElement} el - target DOM node\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {Object} meta - meta properties needed to handle the <template> tags in loops\n   * @returns {TemplateChunk} self\n   */\n  mount(el, scope, parentScope, meta) {\n    if (meta === void 0) {\n      meta = {};\n    }\n\n    if (!el) throw new Error('Please provide DOM node to mount properly your template');\n    if (this.el) this.unmount(scope); // <template> tags require a bit more work\n    // the template fragment might be already created via meta outside of this call\n\n    const {\n      fragment,\n      children,\n      avoidDOMInjection\n    } = meta; // <template> bindings of course can not have a root element\n    // so we check the parent node to set the query selector bindings\n\n    const {\n      parentNode\n    } = children ? children[0] : el;\n    const isTemplateTag = isTemplate(el);\n    const templateTagOffset = isTemplateTag ? Math.max(Array.from(parentNode.children).indexOf(el), 0) : null;\n    this.isTemplateTag = isTemplateTag; // create the DOM if it wasn't created before\n\n    this.createDOM(el);\n\n    if (this.dom) {\n      // create the new template dom fragment if it want already passed in via meta\n      this.fragment = fragment || this.dom.cloneNode(true);\n    } // store root node\n    // notice that for template tags the root note will be the parent tag\n\n\n    this.el = this.isTemplateTag ? parentNode : el; // create the children array only for the <template> fragments\n\n    this.children = this.isTemplateTag ? children || Array.from(this.fragment.childNodes) : null; // inject the DOM into the el only if a fragment is available\n\n    if (!avoidDOMInjection && this.fragment) injectDOM(el, this.fragment); // create the bindings\n\n    this.bindings = this.bindingsData.map(binding => create$5(this.el, binding, templateTagOffset));\n    this.bindings.forEach(b => b.mount(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Update the template with fresh data\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @returns {TemplateChunk} self\n   */\n  update(scope, parentScope) {\n    this.bindings.forEach(b => b.update(scope, parentScope));\n    return this;\n  },\n\n  /**\n   * Remove the template from the node where it was initially mounted\n   * @param   {*} scope - template data\n   * @param   {*} parentScope - scope of the parent template tag\n   * @param   {boolean|null} mustRemoveRoot - if true remove the root element,\n   * if false or undefined clean the root tag content, if null don't touch the DOM\n   * @returns {TemplateChunk} self\n   */\n  unmount(scope, parentScope, mustRemoveRoot) {\n    if (this.el) {\n      this.bindings.forEach(b => b.unmount(scope, parentScope, mustRemoveRoot));\n\n      switch (true) {\n        // <template> tags should be treated a bit differently\n        // we need to clear their children only if it's explicitly required by the caller\n        // via mustRemoveRoot !== null\n        case this.children && mustRemoveRoot !== null:\n          clearChildren(this.children);\n          break;\n        // remove the root node only if the mustRemoveRoot === true\n\n        case mustRemoveRoot === true:\n          removeNode(this.el);\n          break;\n        // otherwise we clean the node children\n\n        case mustRemoveRoot !== null:\n          cleanNode(this.el);\n          break;\n      }\n\n      this.el = null;\n    }\n\n    return this;\n  },\n\n  /**\n   * Clone the template chunk\n   * @returns {TemplateChunk} a clone of this object resetting the this.el property\n   */\n  clone() {\n    return Object.assign({}, this, {\n      el: null\n    });\n  }\n\n});\n/**\n * Create a template chunk wiring also the bindings\n * @param   {string|HTMLElement} html - template string\n * @param   {Array} bindings - bindings collection\n * @returns {TemplateChunk} a new TemplateChunk copy\n */\n\nfunction create$6(html, bindings) {\n  if (bindings === void 0) {\n    bindings = [];\n  }\n\n  return Object.assign({}, TemplateChunk, {\n    html,\n    bindingsData: bindings\n  });\n}\n\n/**\n * Helper function to set an immutable property\n * @param   {Object} source - object where the new property will be set\n * @param   {string} key - object key where the new property will be stored\n * @param   {*} value - value of the new property\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} - the original object modified\n */\nfunction defineProperty(source, key, value, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  /* eslint-disable fp/no-mutating-methods */\n  Object.defineProperty(source, key, Object.assign({\n    value,\n    enumerable: false,\n    writable: false,\n    configurable: true\n  }, options));\n  /* eslint-enable fp/no-mutating-methods */\n\n  return source;\n}\n/**\n * Define multiple properties on a target object\n * @param   {Object} source - object where the new properties will be set\n * @param   {Object} properties - object containing as key pair the key + value properties\n * @param   {Object} options - set the propery overriding the default options\n * @returns {Object} the original object modified\n */\n\nfunction defineProperties(source, properties, options) {\n  Object.entries(properties).forEach((_ref) => {\n    let [key, value] = _ref;\n    defineProperty(source, key, value, options);\n  });\n  return source;\n}\n/**\n * Define default properties if they don't exist on the source object\n * @param   {Object} source - object that will receive the default properties\n * @param   {Object} defaults - object containing additional optional keys\n * @returns {Object} the original object received enhanced\n */\n\nfunction defineDefaults(source, defaults) {\n  Object.entries(defaults).forEach((_ref2) => {\n    let [key, value] = _ref2;\n    if (!source[key]) source[key] = value;\n  });\n  return source;\n}\n\nconst ATTRIBUTE$1 = 0;\nconst VALUE$1 = 3;\n\n/**\n * Convert a string from camel case to dash-case\n * @param   {string} string - probably a component tag name\n * @returns {string} component name normalized\n */\nfunction camelToDashCase(string) {\n  return string.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n}\n/**\n * Convert a string containing dashes to camel case\n * @param   {string} string - input string\n * @returns {string} my-string -> myString\n */\n\nfunction dashToCamelCase$1(string) {\n  return string.replace(/-(\\w)/g, (_, c) => c.toUpperCase());\n}\n\n/**\n * Throw an error with a descriptive message\n * @param   { string } message - error message\n * @returns { undefined } hoppla.. at this point the program should stop working\n */\n\nfunction panic(message) {\n  throw new Error(message);\n}\n/**\n * Evaluate a list of attribute expressions\n * @param   {Array} attributes - attribute expressions generated by the riot compiler\n * @returns {Object} key value pairs with the result of the computation\n */\n\nfunction evaluateAttributeExpressions$1(attributes) {\n  return attributes.reduce((acc, attribute) => {\n    const {\n      value,\n      type\n    } = attribute;\n\n    switch (true) {\n      // spread attribute\n      case !attribute.name && type === ATTRIBUTE$1:\n        return Object.assign({}, acc, {}, value);\n      // value attribute\n\n      case type === VALUE$1:\n        acc.value = attribute.value;\n        break;\n      // normal attributes\n\n      default:\n        acc[dashToCamelCase$1(attribute.name)] = attribute.value;\n    }\n\n    return acc;\n  }, {});\n}\n\n/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nfunction domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (/^\\[object (HTMLCollection|NodeList|Object)\\]$/.test(Object.prototype.toString.call(els)) && typeof els.length === 'number') return Array.from(els);else // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els];\n  } // this object could be looped out of the box\n\n\n  return els;\n}\n\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\n\nfunction $(selector, ctx) {\n  return domToArray(typeof selector === 'string' ? (ctx || document).querySelectorAll(selector) : selector);\n}\n\n/**\n * Normalize the return values, in case of a single value we avoid to return an array\n * @param   { Array } values - list of values we want to return\n * @returns { Array|string|boolean } either the whole list of values or the single one found\n * @private\n */\n\nconst normalize = values => values.length === 1 ? values[0] : values;\n/**\n * Parse all the nodes received to get/remove/check their attributes\n * @param   { HTMLElement|NodeList|Array } els    - DOM node/s to parse\n * @param   { string|Array }               name   - name or list of attributes\n * @param   { string }                     method - method that will be used to parse the attributes\n * @returns { Array|string } result of the parsing in a list or a single value\n * @private\n */\n\n\nfunction parseNodes(els, name, method) {\n  const names = typeof name === 'string' ? [name] : name;\n  return normalize(domToArray(els).map(el => {\n    return normalize(names.map(n => el[method](n)));\n  }));\n}\n/**\n * Set any attribute on a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Object }              name  - either the name of the attribute to set\n *                                                 or a list of properties as object key - value\n * @param   { string }                     value - the new value of the attribute (optional)\n * @returns { HTMLElement|NodeList|Array } the original array of elements passed to this function\n *\n * @example\n *\n * import { set } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * set(img, 'width', 100)\n *\n * // or also\n * set(img, {\n *   width: 300,\n *   height: 300\n * })\n *\n */\n\n\nfunction set(els, name, value) {\n  const attrs = typeof name === 'object' ? name : {\n    [name]: value\n  };\n  const props = Object.keys(attrs);\n  domToArray(els).forEach(el => {\n    props.forEach(prop => el.setAttribute(prop, attrs[prop]));\n  });\n  return els;\n}\n/**\n * Get any attribute from a single or a list of DOM nodes\n * @param   { HTMLElement|NodeList|Array } els   - DOM node/s to parse\n * @param   { string|Array }               name  - name or list of attributes to get\n * @returns { Array|string } list of the attributes found\n *\n * @example\n *\n * import { get } from 'bianco.attr'\n *\n * const img = document.createElement('img')\n *\n * get(img, 'width') // => '200'\n *\n * // or also\n * get(img, ['width', 'height']) // => ['200', '300']\n *\n * // or also\n * get([img1, img2], ['width', 'height']) // => [['200', '300'], ['500', '200']]\n */\n\nfunction get(els, name) {\n  return parseNodes(els, name, 'getAttribute');\n}\n\nconst CSS_BY_NAME = new Map();\nconst STYLE_NODE_SELECTOR = 'style[riot]'; // memoized curried function\n\nconst getStyleNode = (style => {\n  return () => {\n    // lazy evaluation:\n    // if this function was already called before\n    // we return its cached result\n    if (style) return style; // create a new style element or use an existing one\n    // and cache it internally\n\n    style = $(STYLE_NODE_SELECTOR)[0] || document.createElement('style');\n    set(style, 'type', 'text/css');\n    /* istanbul ignore next */\n\n    if (!style.parentNode) document.head.appendChild(style);\n    return style;\n  };\n})();\n/**\n * Object that will be used to inject and manage the css of every tag instance\n */\n\n\nvar cssManager = {\n  CSS_BY_NAME,\n\n  /**\n   * Save a tag style to be later injected into DOM\n   * @param { string } name - if it's passed we will map the css to a tagname\n   * @param { string } css - css string\n   * @returns {Object} self\n   */\n  add(name, css) {\n    if (!CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.set(name, css);\n      this.inject();\n    }\n\n    return this;\n  },\n\n  /**\n   * Inject all previously saved tag styles into DOM\n   * innerHTML seems slow: http://jsperf.com/riot-insert-style\n   * @returns {Object} self\n   */\n  inject() {\n    getStyleNode().innerHTML = [...CSS_BY_NAME.values()].join('\\n');\n    return this;\n  },\n\n  /**\n   * Remove a tag style from the DOM\n   * @param {string} name a registered tagname\n   * @returns {Object} self\n   */\n  remove(name) {\n    if (CSS_BY_NAME.has(name)) {\n      CSS_BY_NAME.delete(name);\n      this.inject();\n    }\n\n    return this;\n  }\n\n};\n\n/**\n * Function to curry any javascript method\n * @param   {Function}  fn - the target function we want to curry\n * @param   {...[args]} acc - initial arguments\n * @returns {Function|*} it will return a function until the target function\n *                       will receive all of its arguments\n */\nfunction curry(fn) {\n  for (var _len = arguments.length, acc = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    acc[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    args = [...acc, ...args];\n    return args.length < fn.length ? curry(fn, ...args) : fn(...args);\n  };\n}\n\n/**\n * Get the tag name of any DOM node\n * @param   {HTMLElement} element - DOM node we want to inspect\n * @returns {string} name to identify this dom node in riot\n */\n\nfunction getName(element) {\n  return get(element, IS_DIRECTIVE) || element.tagName.toLowerCase();\n}\n\nconst COMPONENT_CORE_HELPERS = Object.freeze({\n  // component helpers\n  $(selector) {\n    return $(selector, this.root)[0];\n  },\n\n  $$(selector) {\n    return $(selector, this.root);\n  }\n\n});\nconst PURE_COMPONENT_API = Object.freeze({\n  [MOUNT_METHOD_KEY]: noop,\n  [UPDATE_METHOD_KEY]: noop,\n  [UNMOUNT_METHOD_KEY]: noop\n});\nconst COMPONENT_LIFECYCLE_METHODS = Object.freeze({\n  [SHOULD_UPDATE_KEY]: noop,\n  [ON_BEFORE_MOUNT_KEY]: noop,\n  [ON_MOUNTED_KEY]: noop,\n  [ON_BEFORE_UPDATE_KEY]: noop,\n  [ON_UPDATED_KEY]: noop,\n  [ON_BEFORE_UNMOUNT_KEY]: noop,\n  [ON_UNMOUNTED_KEY]: noop\n});\nconst MOCKED_TEMPLATE_INTERFACE = Object.assign({}, PURE_COMPONENT_API, {\n  clone: noop,\n  createDOM: noop\n});\n/**\n * Bind a DOM node to its component object\n * @param   {HTMLElement} node - html node mounted\n * @param   {Object} component - Riot.js component object\n * @returns {Object} the component object received as second argument\n */\n\nconst bindDOMNodeToComponentObject = (node, component) => node[DOM_COMPONENT_INSTANCE_PROPERTY] = component;\n/**\n * Wrap the Riot.js core API methods using a mapping function\n * @param   {Function} mapFunction - lifting function\n * @returns {Object} an object having the { mount, update, unmount } functions\n */\n\n\nfunction createCoreAPIMethods(mapFunction) {\n  return [MOUNT_METHOD_KEY, UPDATE_METHOD_KEY, UNMOUNT_METHOD_KEY].reduce((acc, method) => {\n    acc[method] = mapFunction(method);\n    return acc;\n  }, {});\n}\n/**\n * Factory function to create the component templates only once\n * @param   {Function} template - component template creation function\n * @param   {Object} components - object containing the nested components\n * @returns {TemplateChunk} template chunk object\n */\n\n\nfunction componentTemplateFactory(template, components) {\n  return template(create$6, expressionTypes, bindingTypes, name => {\n    return components[name] || COMPONENTS_IMPLEMENTATION_MAP.get(name);\n  });\n}\n/**\n * Create a pure component\n * @param   {Function} pureFactoryFunction - pure component factory function\n * @param   {Array} options.slots - component slots\n * @param   {Array} options.attributes - component attributes\n * @param   {Array} options.template - template factory function\n * @param   {Array} options.template - template factory function\n * @param   {any} options.props - initial component properties\n * @returns {Object} pure component object\n */\n\n\nfunction createPureComponent(pureFactoryFunction, _ref) {\n  let {\n    slots,\n    attributes,\n    props,\n    css,\n    template\n  } = _ref;\n  if (template) panic('Pure components can not have html');\n  if (css) panic('Pure components do not have css');\n  const component = defineDefaults(pureFactoryFunction({\n    slots,\n    attributes,\n    props\n  }), PURE_COMPONENT_API);\n  return createCoreAPIMethods(method => function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    // intercept the mount calls to bind the DOM node to the pure object created\n    // see also https://github.com/riot/riot/issues/2806\n    if (method === MOUNT_METHOD_KEY) {\n      const [el] = args;\n      bindDOMNodeToComponentObject(el, component);\n    }\n\n    component[method](...args);\n    return component;\n  });\n}\n/**\n * Create the component interface needed for the @riotjs/dom-bindings tag bindings\n * @param   {string} options.css - component css\n * @param   {Function} options.template - functon that will return the dom-bindings template function\n * @param   {Object} options.exports - component interface\n * @param   {string} options.name - component name\n * @returns {Object} component like interface\n */\n\n\nfunction createComponent(_ref2) {\n  let {\n    css,\n    template,\n    exports,\n    name\n  } = _ref2;\n  const templateFn = template ? componentTemplateFactory(template, exports ? createSubcomponents(exports.components) : {}) : MOCKED_TEMPLATE_INTERFACE;\n  return (_ref3) => {\n    let {\n      slots,\n      attributes,\n      props\n    } = _ref3;\n    // pure components rendering will be managed by the end user\n    if (exports && exports[IS_PURE_SYMBOL]) return createPureComponent(exports, {\n      slots,\n      attributes,\n      props,\n      css,\n      template\n    });\n    const componentAPI = callOrAssign(exports) || {};\n    const component = defineComponent({\n      css,\n      template: templateFn,\n      componentAPI,\n      name\n    })({\n      slots,\n      attributes,\n      props\n    }); // notice that for the components create via tag binding\n    // we need to invert the mount (state/parentScope) arguments\n    // the template bindings will only forward the parentScope updates\n    // and never deal with the component state\n\n    return {\n      mount(element, parentScope, state) {\n        return component.mount(element, state, parentScope);\n      },\n\n      update(parentScope, state) {\n        return component.update(state, parentScope);\n      },\n\n      unmount(preserveRoot) {\n        return component.unmount(preserveRoot);\n      }\n\n    };\n  };\n}\n/**\n * Component definition function\n * @param   {Object} implementation - the componen implementation will be generated via compiler\n * @param   {Object} component - the component initial properties\n * @returns {Object} a new component implementation object\n */\n\nfunction defineComponent(_ref4) {\n  let {\n    css,\n    template,\n    componentAPI,\n    name\n  } = _ref4;\n  // add the component css into the DOM\n  if (css && name) cssManager.add(name, css);\n  return curry(enhanceComponentAPI)(defineProperties( // set the component defaults without overriding the original component API\n  defineDefaults(componentAPI, Object.assign({}, COMPONENT_LIFECYCLE_METHODS, {\n    [STATE_KEY]: {}\n  })), Object.assign({\n    // defined during the component creation\n    [SLOTS_KEY]: null,\n    [ROOT_KEY]: null\n  }, COMPONENT_CORE_HELPERS, {\n    name,\n    css,\n    template\n  })));\n}\n/**\n * Create the bindings to update the component attributes\n * @param   {HTMLElement} node - node where we will bind the expressions\n * @param   {Array} attributes - list of attribute bindings\n * @returns {TemplateChunk} - template bindings object\n */\n\nfunction createAttributeBindings(node, attributes) {\n  if (attributes === void 0) {\n    attributes = [];\n  }\n\n  const expressions = attributes.map(a => create$2(node, a));\n  const binding = {};\n  return Object.assign(binding, Object.assign({\n    expressions\n  }, createCoreAPIMethods(method => scope => {\n    expressions.forEach(e => e[method](scope));\n    return binding;\n  })));\n}\n/**\n * Create the subcomponents that can be included inside a tag in runtime\n * @param   {Object} components - components imported in runtime\n * @returns {Object} all the components transformed into Riot.Component factory functions\n */\n\n\nfunction createSubcomponents(components) {\n  if (components === void 0) {\n    components = {};\n  }\n\n  return Object.entries(callOrAssign(components)).reduce((acc, _ref5) => {\n    let [key, value] = _ref5;\n    acc[camelToDashCase(key)] = createComponent(value);\n    return acc;\n  }, {});\n}\n/**\n * Run the component instance through all the plugins set by the user\n * @param   {Object} component - component instance\n * @returns {Object} the component enhanced by the plugins\n */\n\n\nfunction runPlugins(component) {\n  return [...PLUGINS_SET].reduce((c, fn) => fn(c) || c, component);\n}\n/**\n * Compute the component current state merging it with its previous state\n * @param   {Object} oldState - previous state object\n * @param   {Object} newState - new state givent to the `update` call\n * @returns {Object} new object state\n */\n\n\nfunction computeState(oldState, newState) {\n  return Object.assign({}, oldState, {}, callOrAssign(newState));\n}\n/**\n * Add eventually the \"is\" attribute to link this DOM node to its css\n * @param {HTMLElement} element - target root node\n * @param {string} name - name of the component mounted\n * @returns {undefined} it's a void function\n */\n\n\nfunction addCssHook(element, name) {\n  if (getName(element) !== name) {\n    set(element, IS_DIRECTIVE, name);\n  }\n}\n/**\n * Component creation factory function that will enhance the user provided API\n * @param   {Object} component - a component implementation previously defined\n * @param   {Array} options.slots - component slots generated via riot compiler\n * @param   {Array} options.attributes - attribute expressions generated via riot compiler\n * @returns {Riot.Component} a riot component instance\n */\n\n\nfunction enhanceComponentAPI(component, _ref6) {\n  let {\n    slots,\n    attributes,\n    props\n  } = _ref6;\n  return autobindMethods(runPlugins(defineProperties(Object.create(component), {\n    mount(element, state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      this[ATTRIBUTES_KEY_SYMBOL] = createAttributeBindings(element, attributes).mount(parentScope);\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, props, {}, evaluateAttributeExpressions$1(this[ATTRIBUTES_KEY_SYMBOL].expressions))));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[TEMPLATE_KEY_SYMBOL] = this.template.createDOM(element).clone(); // link this object to the DOM node\n\n      bindDOMNodeToComponentObject(element, this); // add eventually the 'is' attribute\n\n      component.name && addCssHook(element, component.name); // define the root element\n\n      defineProperty(this, ROOT_KEY, element); // define the slots array\n\n      defineProperty(this, SLOTS_KEY, slots); // before mount lifecycle event\n\n      this[ON_BEFORE_MOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]); // mount the template\n\n      this[TEMPLATE_KEY_SYMBOL].mount(element, this, parentScope);\n      this[PARENT_KEY_SYMBOL] = parentScope;\n      this[ON_MOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    update(state, parentScope) {\n      if (state === void 0) {\n        state = {};\n      }\n\n      if (parentScope) {\n        this[ATTRIBUTES_KEY_SYMBOL].update(parentScope);\n      }\n\n      const newProps = evaluateAttributeExpressions$1(this[ATTRIBUTES_KEY_SYMBOL].expressions);\n      if (this[SHOULD_UPDATE_KEY](newProps, this[PROPS_KEY]) === false) return;\n      defineProperty(this, PROPS_KEY, Object.freeze(Object.assign({}, props, {}, newProps)));\n      this[STATE_KEY] = computeState(this[STATE_KEY], state);\n      this[ON_BEFORE_UPDATE_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[TEMPLATE_KEY_SYMBOL].update(this, this[PARENT_KEY_SYMBOL]);\n      this[ON_UPDATED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    },\n\n    unmount(preserveRoot) {\n      this[ON_BEFORE_UNMOUNT_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      this[ATTRIBUTES_KEY_SYMBOL].unmount(); // if the preserveRoot is null the template html will be left untouched\n      // in that case the DOM cleanup will happen differently from a parent node\n\n      this[TEMPLATE_KEY_SYMBOL].unmount(this, this[PARENT_KEY_SYMBOL], preserveRoot === null ? null : !preserveRoot);\n      this[ON_UNMOUNTED_KEY](this[PROPS_KEY], this[STATE_KEY]);\n      return this;\n    }\n\n  })), Object.keys(component).filter(prop => isFunction(component[prop])));\n}\n/**\n * Component initialization function starting from a DOM node\n * @param   {HTMLElement} element - element to upgrade\n * @param   {Object} initialProps - initial component properties\n * @param   {string} componentName - component id\n * @returns {Object} a new component instance bound to a DOM node\n */\n\nfunction mountComponent(element, initialProps, componentName) {\n  const name = componentName || getName(element);\n  if (!COMPONENTS_IMPLEMENTATION_MAP.has(name)) panic(`The component named \"${name}\" was never registered`);\n  const component = COMPONENTS_IMPLEMENTATION_MAP.get(name)({\n    props: initialProps\n  });\n  return component.mount(element);\n}\n\n/**\n * Get all the element attributes as object\n * @param   {HTMLElement} element - DOM node we want to parse\n * @returns {Object} all the attributes found as a key value pairs\n */\n\nfunction DOMattributesToObject(element) {\n  return Array.from(element.attributes).reduce((acc, attribute) => {\n    acc[dashToCamelCase$1(attribute.name)] = attribute.value;\n    return acc;\n  }, {});\n}\n\n/**\n * Similar to compose but performs from left-to-right function composition.<br/>\n * {@link https://30secondsofcode.org/function#composeright see also}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n/**\n * Performs right-to-left function composition.<br/>\n * Use Array.prototype.reduce() to perform right-to-left function composition.<br/>\n * The last (rightmost) function can accept one or more arguments; the remaining functions must be unary.<br/>\n * {@link https://30secondsofcode.org/function#compose original source code}\n * @param   {...[function]} fns) - list of unary function\n * @returns {*} result of the computation\n */\n\nfunction compose() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n\n  return fns.reduce((f, g) => function () {\n    return f(g(...arguments));\n  });\n}\n\nconst {\n  DOM_COMPONENT_INSTANCE_PROPERTY: DOM_COMPONENT_INSTANCE_PROPERTY$1,\n  COMPONENTS_IMPLEMENTATION_MAP: COMPONENTS_IMPLEMENTATION_MAP$1,\n  PLUGINS_SET: PLUGINS_SET$1\n} = globals;\n/**\n * Evaluate the component properties either from its real attributes or from its initial user properties\n * @param   {HTMLElement} element - component root\n * @param   {Object}  initialProps - initial props\n * @returns {Object} component props key value pairs\n */\n\nfunction evaluateInitialProps(element, initialProps) {\n  if (initialProps === void 0) {\n    initialProps = [];\n  }\n\n  return Object.assign({}, DOMattributesToObject(element), {}, callOrAssign(initialProps));\n}\n/**\n * Riot public api\n */\n\n/**\n * Register a custom tag by name\n * @param   {string} name - component name\n * @param   {Object} implementation - tag implementation\n * @returns {Map} map containing all the components implementations\n */\n\n\nfunction register(name, _ref) {\n  let {\n    css,\n    template,\n    exports\n  } = _ref;\n  if (COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was already registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.set(name, createComponent({\n    name,\n    css,\n    template,\n    exports\n  }));\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Unregister a riot web component\n * @param   {string} name - component name\n * @returns {Map} map containing all the components implementations\n */\n\nfunction unregister(name) {\n  if (!COMPONENTS_IMPLEMENTATION_MAP$1.has(name)) panic(`The component \"${name}\" was never registered`);\n  COMPONENTS_IMPLEMENTATION_MAP$1.delete(name);\n  cssManager.remove(name);\n  return COMPONENTS_IMPLEMENTATION_MAP$1;\n}\n/**\n * Mounting function that will work only for the components that were globally registered\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {Object} initialProps - the initial component properties\n * @param   {string} name - optional component name\n * @returns {Array} list of nodes upgraded\n */\n\nfunction mount(selector, initialProps, name) {\n  return $(selector).map(element => mountComponent(element, evaluateInitialProps(element, initialProps), name));\n}\n/**\n * Sweet unmounting helper function for the DOM node mounted manually by the user\n * @param   {string|HTMLElement} selector - query for the selection or a DOM element\n * @param   {boolean|null} keepRootElement - if true keep the root element\n * @returns {Array} list of nodes unmounted\n */\n\nfunction unmount(selector, keepRootElement) {\n  return $(selector).map(element => {\n    if (element[DOM_COMPONENT_INSTANCE_PROPERTY$1]) {\n      element[DOM_COMPONENT_INSTANCE_PROPERTY$1].unmount(keepRootElement);\n    }\n\n    return element;\n  });\n}\n/**\n * Define a riot plugin\n * @param   {Function} plugin - function that will receive all the components created\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction install(plugin) {\n  if (!isFunction(plugin)) panic('Plugins must be of type function');\n  if (PLUGINS_SET$1.has(plugin)) panic('This plugin was already install');\n  PLUGINS_SET$1.add(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Uninstall a riot plugin\n * @param   {Function} plugin - plugin previously installed\n * @returns {Set} the set containing all the plugins installed\n */\n\nfunction uninstall(plugin) {\n  if (!PLUGINS_SET$1.has(plugin)) panic('This plugin was never installed');\n  PLUGINS_SET$1.delete(plugin);\n  return PLUGINS_SET$1;\n}\n/**\n * Helpter method to create component without relying on the registered ones\n * @param   {Object} implementation - component implementation\n * @returns {Function} function that will allow you to mount a riot component on a DOM node\n */\n\nfunction component(implementation) {\n  return function (el, props, _temp) {\n    let {\n      slots,\n      attributes\n    } = _temp === void 0 ? {} : _temp;\n    return compose(c => c.mount(el), c => c({\n      props: evaluateInitialProps(el, props),\n      slots,\n      attributes\n    }), createComponent)(implementation);\n  };\n}\n/**\n * Lift a riot component Interface into a pure riot object\n * @param   {Function} func - RiotPureComponent factory function\n * @returns {Function} the lifted original function received as argument\n */\n\nfunction pure(func) {\n  if (!isFunction(func)) panic('riot.pure accepts only arguments of type \"function\"');\n  func[IS_PURE_SYMBOL] = true;\n  return func;\n}\n/** @type {string} current riot version */\n\nconst version = 'v4.8.7'; // expose some internal stuff that might be used from external tools\n\nconst __ = {\n  cssManager,\n  createComponent,\n  defineComponent,\n  globals\n};\n\nexport { __, component, install, mount, pure, register, uninstall, unmount, unregister, version };\n","/**\n * Converts any DOM node/s to a loopable array\n * @param   { HTMLElement|NodeList } els - single html element or a node list\n * @returns { Array } always a loopable object\n */\nexport default function domToArray(els) {\n  // can this object be already looped?\n  if (!Array.isArray(els)) {\n    // is it a node list?\n    if (\n      /^\\[object (HTMLCollection|NodeList|Object)\\]$/\n        .test(Object.prototype.toString.call(els))\n        && typeof els.length === 'number'\n    )\n      return Array.from(els)\n    else\n      // if it's a single node\n      // it will be returned as \"array\" with one single entry\n      return [els]\n  }\n  // this object could be looped out of the box\n  return els\n}","import domToArray from 'bianco.dom-to-array'\n\n/**\n * Simple helper to find DOM nodes returning them as array like loopable object\n * @param   { string|DOMNodeList } selector - either the query or the DOM nodes to arraify\n * @param   { HTMLElement }        ctx      - context defining where the query will search for the DOM nodes\n * @returns { Array } DOM nodes found as array\n */\nexport default function $(selector, ctx) {\n  return domToArray(typeof selector === 'string' ?\n    (ctx || document).querySelectorAll(selector) :\n    selector\n  )\n}\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('riot'), require('bianco.query')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'riot', 'bianco.query'], factory) :\n  (global = global || self, factory(global.riotHotReload = {}, global.riot, global.$));\n}(this, function (exports, riot, $) { 'use strict';\n\n  $ = $ && $.hasOwnProperty('default') ? $['default'] : $;\n\n  const { cssManager } = riot.__;\n  const { DOM_COMPONENT_INSTANCE_PROPERTY } = riot.__.globals;\n\n  function reload(componentAPI) {\n    const {name} = componentAPI;\n\n    if (!name) {\n      console.warn('Anonymous components can not be reloaded'); // eslint-disable-line\n      return []\n    }\n\n    return $(`${name}, [is=${name}]`).map(el => {\n      const oldTag = el[DOM_COMPONENT_INSTANCE_PROPERTY];\n\n      // remove the tag template from the DOM\n      oldTag.unmount(true);\n      // delete the old css from the css manager\n      cssManager.remove(name);\n\n      // create the new tag\n      const newTag = riot.component(componentAPI)(el, oldTag.props);\n      newTag.update(oldTag.state);\n\n      return newTag\n    })\n  }\n\n  exports.default = reload;\n  exports.reload = reload;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","// Define logics about this component here.\r\nvar relayRep = nodecg.Replicant('relay');\r\nvar speakersRep = nodecg.Replicant('speakers', 'nodecg-discord-widget');\r\nfunction Commentary() {\r\n    return {\r\n        state: {\r\n            themeColor: '#bcbcff',\r\n            speakers: [],\r\n            enableDiscordBundle: false\r\n        },\r\n        onMounted: function () {\r\n            var _this = this;\r\n            relayRep.on('change', function (newVal) {\r\n                _this.state.themeColor = newVal.color;\r\n                _this.update();\r\n            });\r\n            if (speakersRep) {\r\n                speakersRep.on('change', function (newVal) {\r\n                    _this.state.speakers = newVal;\r\n                    _this.state.enableDiscordBundle = true;\r\n                    _this.update();\r\n                });\r\n            }\r\n        }\r\n    };\r\n}\r\n\r\nexport default {\r\n  'css': `commentary .title-label,[is=\"commentary\"] .title-label{ border-bottom-width: 2px; border-bottom-style: solid; padding: 0.5rem; } commentary .speaker,[is=\"commentary\"] .speaker{ align-items: center; background-color: rgba(0, 0, 0, 0.8); margin: 0.25rem; margin-top: 0; padding: 0.5rem; border-radius: 0.5rem; }`,\r\n  'exports': Commentary,\r\n\r\n  'template': function(template, expressionTypes, bindingTypes, getComponent) {\r\n    return template(\r\n      '<div class=\"columns is-multiline\"><div class=\"column is-full has-text-centered\"><h1 expr0=\"expr0\" class=\"title is-4 title-label has-text-white\">\\r\\n                \\r\\n            </h1></div><div class=\"column is-flex\" style=\"justify-content: space-around; flex-wrap: wrap;\"><div expr1=\"expr1\" class=\"is-flex speaker\"></div><article expr4=\"expr4\" class=\"message is-warning\"></article></div></div>',\r\n      [{\r\n        'redundantAttribute': 'expr0',\r\n        'selector': '[expr0]',\r\n\r\n        'expressions': [{\r\n          'type': expressionTypes.ATTRIBUTE,\r\n          'name': 'style',\r\n\r\n          'evaluate': function(scope) {\r\n            return ['border-color: ', scope.state.themeColor].join('');\r\n          }\r\n        }]\r\n      }, {\r\n        'type': bindingTypes.EACH,\r\n        'getKey': null,\r\n        'condition': null,\r\n\r\n        'template': template(\r\n          '<div><figure class=\"image is-48x48\"><img expr2=\"expr2\" class=\"is-rounded\"/></figure></div><div expr3=\"expr3\" class=\"is-size-4 has-text-white\" style=\"margin: 0 0.5rem;\"> </div>',\r\n          [{\r\n            'redundantAttribute': 'expr2',\r\n            'selector': '[expr2]',\r\n\r\n            'expressions': [{\r\n              'type': expressionTypes.ATTRIBUTE,\r\n              'name': 'src',\r\n\r\n              'evaluate': function(scope) {\r\n                return scope.speaker.member.user.avatarURL;\r\n              }\r\n            }]\r\n          }, {\r\n            'redundantAttribute': 'expr3',\r\n            'selector': '[expr3]',\r\n\r\n            'expressions': [{\r\n              'type': expressionTypes.TEXT,\r\n              'childNodeIndex': 0,\r\n\r\n              'evaluate': function(scope) {\r\n                return scope.speaker.member.displayName;\r\n              }\r\n            }]\r\n          }]\r\n        ),\r\n\r\n        'redundantAttribute': 'expr1',\r\n        'selector': '[expr1]',\r\n        'itemName': 'speaker',\r\n        'indexName': null,\r\n\r\n        'evaluate': function(scope) {\r\n          return scope.state.speakers;\r\n        }\r\n      }, {\r\n        'type': bindingTypes.IF,\r\n\r\n        'evaluate': function(scope) {\r\n          return !scope.state.enableDiscordBundle;\r\n        },\r\n\r\n        'redundantAttribute': 'expr4',\r\n        'selector': '[expr4]',\r\n\r\n        'template': template(\r\n          '<div class=\"message-body\">\\r\\n                    This graphic needs \\'nodecg-discord-widget\\' bundle!!\\r\\n                </div>',\r\n          []\r\n        )\r\n      }]\r\n    );\r\n  },\r\n\r\n  'name': 'commentary'\r\n};","import \"@riotjs/hot-reload\";\r\nimport * as riot from \"riot\";\r\nimport Commentary from \"./components/commentary/commentary.riot\";\r\n\r\nriot.component(Commentary)(\r\n  document.getElementById(\"root\") || document.body,\r\n  {}\r\n);\r\n"]}